{"version":3,"sources":["authorization/ocpRestClient.js","Header.jsx","TabPanel.jsx","Pagination.jsx","services/workflow/Tasks.js","TaskDetails.jsx","FileViewer.jsx","DocumentDialogView.jsx","ExtractedPersonalData.jsx","RiskClassification.jsx","TasksList.jsx","ContractDetails.jsx","services/riskguard/RiskGuard.js","context/ApplicationContext.jsx","AddContract.jsx","CreatedContractList.jsx","ContractList.jsx","App.jsx","index.jsx"],"names":["authService","AuthService","clientId","process","authorizeEndpoint","tokenEndpoint","logoutEndpoint","redirectUri","scopes","login","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","authorize","stop","apply","arguments","logout","_x","_ref2","_callee2","shouldEndSession","_context2","logoutWithIdTokenHint","idToken","window","sessionStorage","removeItem","location","replace","encodeURIComponent","tokenRefreshPromise","undefined","tokenRefreshWaitCount","axios","interceptors","response","use","_x2","_ref3","_callee3","error","_error$response","config","_context3","status","sent","fetchToken","getAuthTokens","refresh_token","then","authTokens","access_token","headers","_objectSpread","Authorization","concat","Promise","reject","Header","authContext","_useState","useState","_useState2","_slicedToArray","anchorEl","setAnchorEl","handleClose","_jsxs","className","children","_jsx","Button","onClick","event","currentTarget","userName","Menu","anchorOrigin","vertical","horizontal","getContentAnchorEl","keepMounted","open","Boolean","onClose","MenuItem","TabPanel","value","index","other","_objectWithoutProperties","_excluded","role","hidden","Pagination","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","length","args","Array","_key","call","onChangePage","page","props","handlePageNumber","_createClass","key","TablePagination","rowsPerPageOptions","component","count","this","rowsPerPage","pageNumber","onPageChange","React","Component","Tasks","_getTasks","_claimTask","_completeTask","url","offset","method","taskname","catch","alert","data","message","taskId","_x3","_x4","approved","TaskDetails","state","selectedTask","prevProps","setState","dt","Date","parse","toLocaleString","task","variables","find","q","name","properties","requester_email","_this2","Dialog","DialogTitle","id","DialogContent","TextField","margin","label","type","fullWidth","assignee","getDateValue","createTime","InputLabelProps","shrink","getContractName","getRequesterEmail","getContractValue","DialogActions","closeDialog","variant","color","VIEWER_ID","FileViewer","publicationData","bravaApi","setBravaApi","useAuth","loadBravaViewer","useCallback","get","res","scriptEl","document","createElement","appendChild","createTextNode","getElementsByTagName","useEffect","addEventListener","currentOrigin","origin","target","setHttpHeaders","setScreenBanner","enableMarkup","editableMarkupPredicate","commentableMarkupPredicate","visibleToolPropertyPredicate","deletableMarkupPredicate","deletableStampPredicate","editableStampPredicate","addableStampPredicate","setMarkupHost","ViewerAuthority","setUserName","getUser","preferred_username","setScreenWatermark","setLayout","topToolbar","toolbarWithMarkupStuff","left","side","center","right","style","marginLeft","size","mainContainer","layoutKey","tabContainerWithMarkups","sidebarName","primary","tabs","title","markupTools","tools","tool","icon","closed","fill","addPublication","render","baseUrl","DocumentDialogView","fileId","openRef","useRef","setPublicationData","current","result","blobId","_embedded","collection","forEach","content","blob_id","publicationResult","getPublicationData","fullScreen","maxWidth","ExtractedPersonalData","selectedContract","create_time","arr","map","str","startsWith","substring","prevState","snapshot","formatExtractedTerms","extracted_terms","riskClassifications","RiskClassification","_Component","openExtractedPersonalData","row","handleCloseExtractedPersonalData","bind","_assertThisInitialized","risk_classification","IconButton","showExtractedPersonalData","InfoIcon","Alert","MuiAlert","elevation","TasksList","detailsOpen","tasks","openDocumentDialogView","fileName","showBackdrop","showSnackBar","snackBarMessage","snackBarSeverity","handleCloseTaskDetails","handleCloseDocumentDialogView","handleSnackBarClose","taskService","getTasks","_links","finally","_this3","claimTask","approve","_this4","completeTask","errorMessage","exception","found","_this5","TableContainer","Paper","Table","TableHead","TableRow","TableCell","align","TableBody","getContract","ButtonGroup","showDetails","ArrowForwardIosIcon","Backdrop","zIndex","CircularProgress","Snackbar","autoHideDuration","action","Fragment","CloseIcon","fontSize","severity","ContractDetails","parentRaiseError","parent","selectedContractRef","setValue","_useState3","traits","_useState4","contract","setContract","_useState5","_useState6","contractAcl","setContractAcl","ensureNonNullStringValue","propertyValue","toString","raiseError","fetchSelectedContract","fetchAclForSelectedContract","_Fragment","Tabs","orientation","onChange","newValue","Tab","monthly_installments","yearly_income","permits","permit","display_name","identity_type","group_name","identity","sort","permita","permitb","verticalAlign","permissions","permissiona","permissionb","permission","trait","approvals","approval","push","a","b","trait_name","getApprovals","ca_approval","scope","is_required","has_been_granted","approver","approver_role","approval_date","RiskGuard","_processDoc","calculateRisk","rgResponse","extractedSSN","extractedCC","extractedBA","extractedPN","extractedPhone","extractedAddress","extractedGL","extractedON","riskClassification","personNameCount","phoneNumberCount","results","tme","Results","nfinder","nfExtract","ExtractedTerm","extractedTerm","CartridgeID","ConfidenceScore","nfinderNormalized","MainTerm","ClientNormalized","extractedTerms","fileData","form","postRequest","FormData","append","resolve","postResponse","ApplicationContext","createContext","ApplicationProvider","appRootFolderId","setAppRootFolderId","Provider","updateAppRootFolderId","AddContract","_submitContract","selectFile","selectedFile","files","fileNameText","innerHTML","test","setFileNameInputRef","element","handleChangeContractType","handleChangeContractName","handleChangeContractValue","handleChangeContractRequesterEmail","handleChangeContractMonthlyInstallments","handleChangeContractYearlyIncome","canSubmit","newContractType","newContractName","newContractValue","newContractRequesterEmail","newContractMonthlyInstallments","newContractYearlyIncome","riskGuard","contractRisk","riskGuardService","risk","customerEmail","parentFolderId","aclId","formData","processDoc","context","post","JSON","stringify","onAddContract","cmsType","isLoanContract","entries","parseInt","statusCode","htmlFor","accept","ref","RadioGroup","defaultValue","FormControlLabel","control","Radio","InputProps","inputProps","min","FormControl","InputLabel","Select","labelId","submitContract","disabled","contextType","CreatedContractList","handleContractAdded","addNumberOfContracts","contracts","lineManagerAclId","riskManagerAclId","completedAclId","openContractDetails","openAddContract","handleCloseAddContract","handleCloseContractDetails","getAcls","getContracts","total","acl","contractId","startIcon","AddIcon","openContractDialog","startContractForApproval","ContractList","contractDetailsOpen","App","isPending","isAuthenticated","groups","jwtDecode","id_token","grp","group","fullGroupName","indexOf","tabIndex","includes","WrappedSecuredApp","AuthProvider","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.32f73141.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n    AuthProvider,\r\n    AuthService,\r\n    useAuth,\r\n} from 'react-oauth2-pkce';\r\n\r\nconst authService = new AuthService({\r\n    clientId: process.env.REACT_APP_CLIENT_ID,\r\n    authorizeEndpoint: process.env.REACT_APP_BASE_URL + '/tenants/' + process.env.REACT_APP_TENANT_ID + '/oauth2/auth',\r\n    tokenEndpoint: process.env.REACT_APP_BASE_URL + '/tenants/' + process.env.REACT_APP_TENANT_ID + '/oauth2/token',\r\n    logoutEndpoint: process.env.REACT_APP_BASE_URL + '/tenants/' + process.env.REACT_APP_TENANT_ID + '/oauth2/logout',\r\n    redirectUri: process.env.REACT_APP_REDIRECT_URI,\r\n    scopes: ['openid', 'otds:groups'],\r\n});\r\n\r\nconst login = async () => authService.authorize();\r\nconst logout = async (shouldEndSession) => authService.logout(shouldEndSession);\r\n\r\n// This custom logout is required, as the standard PKCE React library (react-oauth2-pkce) doesn't support the id_token_hint mechanism (which is what the OpenText Developer Cloud uses).\r\n// A request with the owners of the react-oauth2-pkce library has been logged to add the id_token_hint support. Feel free to inquire on the matter yourself.\r\nconst logoutWithIdTokenHint = (shouldEndSession, idToken) => {\r\n    logout(shouldEndSession);\r\n    window.sessionStorage.removeItem(\"ca_token_expiration_time\");\r\n    window.location.replace(process.env.REACT_APP_BASE_URL + '/tenants/' + process.env.REACT_APP_TENANT_ID + '/oauth2/logout?id_token_hint=' + encodeURIComponent(idToken) + '&post_logout_redirect_uri=' + encodeURIComponent(process.env.REACT_APP_REDIRECT_URI));\r\n}\r\n\r\n// If you want to test (access) token expiry, you can enable this interceptor method and look at the developer tools console in your browser\r\n// to force a 401/Unauthorized error and see how it gets intercepted and remediated (new token fetched) by the reponse interceptor\r\n// axios.interceptors.request.use(\r\n//     async (config) => {\r\n//         const tokenExpirationTime = window.sessionStorage.getItem(\"ca_token_expiration_time\");\r\n//         const timeUntilTokenExpires = 5000;\r\n//         if (!tokenExpirationTime) {\r\n//             window.sessionStorage.setItem(\"ca_token_expiration_time\", Date.now() + timeUntilTokenExpires);\r\n//         } else {\r\n//             if (Date.now() > tokenExpirationTime) {\r\n//             if (config.headers.Authorization !== \"Bearer cuicuibidon\") {\r\n//                 config.headers = {\r\n//                     ...config.headers,\r\n//                     Authorization: \"Bearer this_access_token_is_not_valid\"\r\n//                 };\r\n//                 config.sent = false;\r\n//                 }\r\n//             window.sessionStorage.setItem(\"ca_token_expiration_time\", Date.now() + timeUntilTokenExpires);\r\n//             }\r\n//         }\r\n//\r\n//         return config;\r\n//     },\r\n//     (error) => Promise.reject(error)\r\n// );\r\n  \r\n// Promise that resolves when the acces_token is refreshed.\r\nlet tokenRefreshPromise = undefined;\r\n\r\n// Count the number of pending requests that are waiting for a token refresh\r\nlet tokenRefreshWaitCount = 0;\r\n\r\naxios.interceptors.response.use(\r\n    (response) => response,\r\n    async (error) => {\r\n        const config = error?.config;\r\n\r\n        if (error?.response?.status === 401 && !config?.sent) {\r\n            config.sent = true;\r\n            tokenRefreshWaitCount++;\r\n            \r\n            if (tokenRefreshWaitCount === 1) {\r\n                // Only create a new tokenRefreshPromise for the first 401 after the previous refresh.\r\n                tokenRefreshPromise = authService.fetchToken(authService.getAuthTokens().refresh_token, true);\r\n            }\r\n            // Wait for the refreshed token before retrying.\r\n            await tokenRefreshPromise.then((authTokens) => {\r\n                if (authTokens.access_token) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        Authorization: `Bearer ${authTokens.access_token}`,\r\n                    };\r\n                }\r\n            });\r\n            tokenRefreshWaitCount--;\r\n\r\n            // Retry the request\r\n            return axios(config);\r\n        }\r\n    \r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport {\r\n    AuthProvider,\r\n    authService,\r\n    axios,\r\n    login,\r\n    logout,\r\n    logoutWithIdTokenHint,\r\n    useAuth\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Button, Menu, MenuItem } from \"@material-ui/core\";\r\n\r\nfunction Header({ authContext, logout }) {\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    }\r\n\r\n    const logUserOut = () => {\r\n        logout(true, authContext.idToken);\r\n        handleClose();\r\n    }\r\n\r\n    return (\r\n        <header className=\"page-header\">\r\n            <div className=\"logo logo-ot-appworks\" />\r\n            <div className=\"header-title\">Contract Approval</div>\r\n            <div className=\"header-menu\">\r\n                <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n                    {authContext.userName}\r\n                </Button>\r\n                <Menu\r\n                    anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n                    getContentAnchorEl={null}\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={Boolean(anchorEl)}\r\n                    onClose={handleClose}>\r\n                    <MenuItem onClick={logUserOut}>Logout</MenuItem>\r\n                </Menu>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction TabPanel ({ children, value, index, ...other }) {\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <div>{children}</div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired,\r\n}\r\n\r\nexport default TabPanel;\r\n","import React from 'react'\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nexport default class Pagination extends React.Component {\r\n\r\n\tonChangePage = (event, page) => {\r\n\t\tthis.props.handlePageNumber(page);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[10]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={this.props.count}\r\n\t\t\t\trowsPerPage={10}\r\n\t\t\t\tpage={this.props.pageNumber}\r\n\t\t\t\tonPageChange={this.onChangePage}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n","import axios from 'axios';\r\n\r\nexport default class Tasks {\r\n  url = process.env.REACT_APP_BASE_URL + \"/workflow/v1/tasks\";\r\n\r\n  constructor(props) {\r\n    this.props = props;\r\n  }\r\n\r\n  async getTasks(offset) {\r\n    return axios({\r\n      method: 'get',\r\n      url: this.url + '?sort=createTime&order=desc&name=' + encodeURIComponent(this.props.taskname) +'&candidateOrAssigned=' + encodeURIComponent(this.props.authContext.userName) + '&includeProcessVariables=true' + (offset ? '&offset=' + offset : ''),\r\n      headers: this.props.authContext.headers\r\n    }).catch(error => {\r\n      alert(error.response != null && error.response.data != null ? error.response.data : error.message);\r\n    });\r\n  }\r\n\r\n  async claimTask(taskId) {\r\n    return axios({\r\n      method: 'post',\r\n      url: this.url + '/' + taskId,\r\n      headers: this.props.authContext.headers,\r\n      data: {\r\n        \"action\": \"claim\",\r\n        \"assignee\": this.props.authContext.userName\r\n      }\r\n    }).catch(error => {\r\n      alert(error.response != null && error.response.data != null ? error.response.data : error.message);\r\n    });\r\n  }\r\n\r\n  async completeTask(taskId, approved) {\r\n    return axios({\r\n      method: 'post',\r\n      url: this.url + '/' + taskId,\r\n      headers: this.props.authContext.headers,\r\n      data: {\r\n        \"action\": \"complete\",\r\n        \"outcome\": approved ? \"approved\" : \"rejected\",\r\n        \"variables\": [\r\n          {\r\n              \"name\": \"approver\",\r\n              \"value\": this.props.authContext.userName\r\n          }\r\n      ]\r\n      }\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle\r\n} from '@material-ui/core';\r\n\r\nexport default class TaskDetails extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedTask: props.selectedTask\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.open !== this.props.open || prevProps.selectedTask !== this.props.selectedTask) {\r\n      this.setState({\r\n        selectedTask: this.props.selectedTask\r\n      });\r\n    }\r\n  }\r\n\r\n  closeDialog() {\r\n    this.props.onClose();\r\n  }\r\n\r\n  getDateValue(dt) {\r\n    return dt ? new Date(Date.parse(dt)).toLocaleString() : '';\r\n  }\r\n\r\n  getContractName(task) {\r\n    if (task && task.variables[0]) {\r\n      return task.variables.find(q => q.name === \"contract\").value.name;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  getRequesterEmail(task) {\r\n    if (task && task.variables[0]) {\r\n      return task.variables.find(q => q.name === \"contract\").value.properties.requester_email;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  getContractValue(task) {\r\n    if (task && task.variables[0]) {\r\n      return task.variables.find(q => q.name === \"contract\").value.properties.value;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Dialog open={this.props.open} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Task details</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Task name\"\r\n            value={this.state.selectedTask.name}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"assignee\"\r\n            label=\"Assignee\"\r\n            value={this.state.selectedTask.assignee || \"\"}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"createTime\"\r\n            label=\"Creation date\"\r\n            value={this.getDateValue(this.state.selectedTask.createTime)}\r\n            type=\"text\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"cmsName\"\r\n            label=\"Contract name\"\r\n            value={this.getContractName(this.state.selectedTask)}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"cmsEmail\"\r\n            label=\"Requester email address\"\r\n            value={this.getRequesterEmail(this.state.selectedTask)}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            id=\"cmsValue\"\r\n            label=\"Contract value\"\r\n            value={this.getContractValue(this.state.selectedTask)}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => { this.closeDialog() }} variant=\"contained\" color=\"primary\">\r\n            Close\r\n            </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    )\r\n  }\r\n}\r\n","import React, { useEffect, useState, useCallback } from \"react\";\r\n\r\nimport {\r\n\taxios,\r\n\tuseAuth\r\n} from './authorization/ocpRestClient';\r\nimport \"./FileViewer.css\";\r\n\r\nconst VIEWER_ID = \"file-viewer-root\";\r\n\r\nfunction FileViewer({ closeDialog, publicationData}) {\r\n  const [bravaApi, setBravaApi] = useState(null);\r\n  const { authService } = useAuth();\r\n  const publicationStatus = \"Complete\";\r\n\r\n  const loadBravaViewer = useCallback(() => {\r\n    axios\r\n      .get(\r\n        process.env.REACT_APP_BASE_URL + \"/viewer/api/v1/viewers/brava-view-1.x/loader\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n          }\r\n        }\r\n      )\r\n      .then((res) => {\r\n        if (res.data) {\r\n          const scriptEl = document.createElement(\"script\");\r\n          scriptEl.appendChild(document.createTextNode(res.data));\r\n          document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\r\n        }\r\n      });\r\n  }, [authService]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"bravaReady\", function (event) {\r\n        const currentOrigin = window.location.origin;\r\n        if (event.origin && event.origin !== currentOrigin) {\r\n          return;\r\n        }\r\n        if (event.target && event.target.origin === currentOrigin) {\r\n          window.addEventListener(event[\"detail\"] + \"-close\", function() {\r\n            closeDialog();\r\n          });\r\n          setBravaApi(window[event[\"detail\"]]);\r\n        }\r\n    });\r\n    loadBravaViewer();\r\n  }, [closeDialog, loadBravaViewer]);\r\n\r\n  useEffect(() => {\r\n    const toolbarWithMarkupStuff = {\r\n      left: [\r\n        { component: 'ToggleSidebarButton', side: 'tabContainerWithMarkups' },\r\n        { component: 'DownloadButton' },\r\n        { component: 'PanButton' },\r\n        { component: 'ZoomToRectangleButton' },\r\n        { component: 'SaveButton' },\r\n        { component: 'ZoomInButton' },\r\n        { component: 'ZoomOutButton' },\r\n        { component: 'ZoomExtentsButton' },\r\n        { component: 'ZoomWidthButton' },\r\n        { component: 'RotateButton' },\r\n      ],\r\n      center: [{ component: 'TitleText' }],\r\n      right: [\r\n        { component: 'PageSelector', style: { marginLeft: '0.5em' } },\r\n        { component: 'CloseButton', size: 18 }\r\n      ]\r\n    };\r\n    \r\n    const tabContainerWithMarkups = {\r\n      sidebarName: 'tabContainerWithMarkups',\r\n      primary: 'primary',\r\n      tabs: [\r\n        { component: 'ThumbnailPane', title: 'tab.thumbnails' },\r\n        { component: 'MarkupPane', title: 'tab.markups', layoutKey: 'markupTools' },\r\n      ]\r\n    };\r\n    \r\n    const markupTools = [\r\n      {\r\n        title: 'Tools',\r\n        tools: [\r\n          {\r\n            label: 'select markup',\r\n            tool: 'select',\r\n            icon: 'Select'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        title: 'toolPalette.annotations',\r\n        tools: [\r\n          { label: 'text', tool: 'text', icon: 'Text', props: {} },\r\n          { label: 'arrow', tool: 'arrow', icon: 'Arrow', props: {} },\r\n          { label: 'ellipse', tool: 'ellipse', icon: 'Ellipse', props: {} },\r\n          { label: 'arc', tool: 'arc', icon: 'Arc', props: {} },\r\n          { label: 'scratchout', tool: 'scratchout', icon: 'Scratchout', props: {} },\r\n          { label: 'cloudRectangle', tool: 'cloudRectangle', icon: 'CloudRectangle', props: {} },\r\n          { label: 'cloudPolygon', tool: 'cloudPolygon', icon: 'CloudPolygon', props: {} },\r\n          { label: 'openSketch', tool: 'openSketch', icon: 'OpenSketch' },\r\n          { label: 'closedSketch', tool: 'closedSketch', icon: 'ClosedSketch' },\r\n          { label: 'line', tool: 'line', icon: 'Line', props: {} },\r\n          {\r\n            label: 'polyline',\r\n            tool: 'polyline',\r\n            icon: 'Polyline',\r\n            props: { closed: false }\r\n          },\r\n          { label: 'crossout', tool: 'crossout', icon: 'Crossout', props: {} },\r\n          { label: 'rectangle', tool: 'rectangle', icon: 'Rectangle', props: {} },\r\n          {\r\n            label: 'polygon',\r\n            tool: 'polygon',\r\n            icon: 'Polygon',\r\n            props: { closed: true }\r\n          },\r\n          {\r\n            label: 'highlight',\r\n            tool: 'highlight',\r\n            icon: 'Highlight'\r\n          },\r\n          {\r\n            label: 'roundedRectangle',\r\n            tool: 'roundedRectangle',\r\n            icon: 'RoundedRectangle'\r\n          },\r\n          {\r\n            label: 'changemark',\r\n            tool: 'changemark',\r\n            icon: 'Changemark',\r\n            props: { fill: '#f05822dd' } // OpenText \"Burnt\" color\r\n          },\r\n          {\r\n            label: 'raster',\r\n            tool: 'raster',\r\n            icon: 'Raster'\r\n          },\r\n          {\r\n            label: 'stamp',\r\n            tool: 'stamp',\r\n            icon: 'Stamp'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        title: 'toolPalette.text',\r\n        tools: [\r\n          {\r\n            label: 'textScratch',\r\n            tool: 'textScratch',\r\n            icon: 'TextScratchout'\r\n          },\r\n          {\r\n            label: 'textUnderline',\r\n            tool: 'textUnderline',\r\n            icon: 'TextUnderline'\r\n          },\r\n          {\r\n            label: 'textStrike',\r\n            tool: 'textStrike',\r\n            icon: 'TextStrikeThrough'\r\n          },\r\n          {\r\n            label: 'textHighlight',\r\n            tool: 'textHighlight',\r\n            icon: 'TextHighlight'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        title: 'toolPalette.redactions',\r\n        tools: [\r\n          {\r\n            label: 'redactionRectangle',\r\n            tool: 'redactionRectangle',\r\n            icon: 'RedactArea'\r\n          },\r\n          {\r\n            label: 'redactionText',\r\n            tool: 'redactionText',\r\n            icon: 'RedactText'\r\n          },\r\n          {\r\n            label: 'peekRectangle',\r\n            tool: 'peekRectangle',\r\n            icon: 'RedactPeek'\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n\r\n    if (bravaApi) {\r\n      bravaApi.setHttpHeaders({\r\n          Authorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n      });\r\n      bravaApi.setScreenBanner(\r\n        \"Viewer Service by OpenText | Document Viewed at %Time\"\r\n      );\r\n      bravaApi.enableMarkup(true);\r\n      bravaApi.editableMarkupPredicate = () => true;\r\n      bravaApi.commentableMarkupPredicate = () => true;\r\n      bravaApi.visibleToolPropertyPredicate = () => true;\r\n      bravaApi.deletableMarkupPredicate = () => true;\r\n      bravaApi.deletableStampPredicate = () => true;\r\n      bravaApi.editableStampPredicate = () => true;\r\n      bravaApi.addableStampPredicate = () => true;\r\n\r\n      bravaApi.setMarkupHost(window.ViewerAuthority);\r\n      bravaApi.setUserName(authService.getUser().preferred_username);\r\n      bravaApi.setScreenWatermark(\"ORIGINAL\");\r\n\r\n      bravaApi.setLayout({\r\n        topToolbar: 'toolbarWithMarkupStuff',\r\n        toolbarWithMarkupStuff: toolbarWithMarkupStuff,\r\n        mainContainer: [\r\n          { component: 'TabContainer', layoutKey: 'tabContainerWithMarkups' },\r\n          { component: 'PageContainer' }\r\n        ],\r\n        tabContainerWithMarkups: tabContainerWithMarkups,\r\n        markupTools: markupTools\r\n      });\r\n      bravaApi.addPublication(publicationData, true);\r\n      bravaApi.render(VIEWER_ID); \r\n    }\r\n  }, [bravaApi, publicationData, authService]);\r\n\r\n  if (publicationStatus !== \"Complete\") {\r\n    return null;\r\n  }\r\n\r\n  return <div id={VIEWER_ID}></div>;\r\n};\r\n\r\nexport default FileViewer;\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport {\r\n\tDialog,\r\n\tDialogContent,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n\taxios,\r\n\tuseAuth\r\n} from './authorization/ocpRestClient';\r\nimport FileViewer from \"./FileViewer\";\r\n\r\nconst baseUrl = process.env.REACT_APP_BASE_URL;\r\n\r\nfunction DocumentDialogView({ fileId, open, onClose }) {\r\n\tconst openRef = useRef(open);\r\n\tconst [publicationData, setPublicationData] = useState('');\r\n\tconst { authService } = useAuth();\r\n\r\n\tuseEffect (() => {\r\n\t\tconst getPublicationData = (fileId) => {\r\n\t\t\tlet publicationData = \"\";\r\n\t\t\taxios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: baseUrl + '/cms/instances/file/ca_contract/' + fileId + '/contents',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n\t\t\t\t}\r\n\t\t\t}).then((result) => {\r\n\t\t\t\tlet blobId = \"\";\r\n\t\t\t\tif(result && result.data && result.data._embedded && result.data._embedded.collection) {\r\n\t\t\t\t\tlet fileContents = result.data._embedded.collection;\r\n\t\t\t\t\tfileContents.forEach(content => {\r\n\t\t\t\t\t\tif(content.name === \"Brava rendition\"){\r\n\t\t\t\t\t\t\t\tblobId = content.blob_id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} \r\n\t\t\t\tif (blobId) {\r\n\t\t\t\t\t\taxios({\r\n\t\t\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\t\t\turl: baseUrl + '/css/v2/content/' + blobId + '/download?avs-scan=false',\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then((publicationResult)=>{\r\n\t\t\t\t\t\t\tif(publicationResult.data.status === \"Complete\") {\r\n\t\t\t\t\t\t\t\tpublicationData = publicationResult;\r\n\t\t\t\t\t\t\t\tif(publicationData) {\r\n\t\t\t\t\t\t\t\t\tsetPublicationData(publicationData.data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\talert(error.response != null && error.response.data != null ? error.response.data : error.message);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\talert(error.response != null && error.response.data != null ? error.response.data : error.message);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (openRef.current !== open) {\r\n\t\t\topenRef.current = open;\r\n\t\t\tif (open) {\r\n\t\t\t\tgetPublicationData(fileId);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [authService, fileId, open]);\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={open}\r\n\t\t\taria-labelledby=\"customized-dialog-title\"\r\n\t\t\tfullScreen={true}\r\n\t\t\tmaxWidth='md'>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<FileViewer\r\n\t\t\t\t\tcloseDialog={onClose}\r\n\t\t\t\t\tpublicationData={publicationData}\r\n\t\t\t\t/>\r\n\t\t\t</DialogContent>\r\n\t\t</Dialog>\r\n\t)\r\n};\r\n\r\nexport default DocumentDialogView;\r\n","import React from 'react'\r\nimport {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle\r\n} from '@material-ui/core';\r\n\r\nexport default class ExtractedPersonalData extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tselectedContract: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tproperties: {},\r\n\t\t\t\tcreate_time: ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tformatExtractedTerms(arr) {\r\n\t\tif (arr) {\r\n\t\t\treturn arr.map(str => str.startsWith(\"**\") ? <b><p>{str.substring(2)}</p></b>:<p>- {str}</p>);\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\r\n\t\tif (prevProps.open !== this.props.open\r\n\t\t\t|| prevProps.selectedContract !== this.props.selectedContract) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedContract: this.props.selectedContract\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDialog() {\r\n\t\tthis.props.onClose();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Dialog open={this.props.open} aria-labelledby=\"form-dialog-title\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">Extracted Terms</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<div>{this.formatExtractedTerms(this.state.selectedContract.properties.extracted_terms)}</div>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => { this.closeDialog() }} variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\t\tClose\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { IconButton } from '@material-ui/core';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport ExtractedPersonalData from './ExtractedPersonalData';\r\n\r\nconst riskClassifications = ['NONE', 'LOW', 'MEDIUM', 'HIGH', 'VERY HIGH'];\r\n\r\nexport class RiskClassification extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\topenExtractedPersonalData: false,\r\n            row: props.row\r\n\t\t};\r\n\t\tthis.handleCloseExtractedPersonalData = this.handleCloseExtractedPersonalData.bind(this);\r\n\t}\r\n\r\n\tshowExtractedPersonalData() {\r\n\t\tthis.setState({\r\n\t\t\topenExtractedPersonalData: true\r\n\t\t});\r\n\t}\r\n\r\n    handleCloseExtractedPersonalData() {\r\n\t\tthis.setState({ openExtractedPersonalData: false })\r\n\t}\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {riskClassifications[this.state.row.properties.risk_classification - 1]}\r\n                <IconButton size=\"small\" variant=\"outlined\" color=\"primary\" title=\"Show extracted personal data\" onClick={() => { this.showExtractedPersonalData(this.state.row) }}>\r\n                    <InfoIcon />\r\n                </IconButton>\r\n                <ExtractedPersonalData open={this.state.openExtractedPersonalData} selectedContract={this.state.row} onClose={this.handleCloseExtractedPersonalData} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default RiskClassification\r\n\r\n","import React from 'react';\r\nimport {\r\n  Backdrop,\r\n  Button,\r\n  ButtonGroup,\r\n  CircularProgress,\r\n  IconButton,\r\n  Paper,\r\n  Snackbar,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow\r\n} from \"@material-ui/core\";\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport Pagination from './Pagination';\r\nimport Tasks from './services/workflow/Tasks';\r\nimport TaskDetails from './TaskDetails';\r\nimport DocumentDialogView from './DocumentDialogView';\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\nimport RiskClassification from './RiskClassification';\r\n\r\nconst Alert = (props) => {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n/**\r\n * This view displays the list of contracts pending for approval.\r\n */\r\nclass TasksList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      detailsOpen: false,\r\n      selectedTask: { variables: [] },\r\n      tasks: [],\r\n      count: -1,\r\n      page: 0,\r\n      openDocumentDialogView: false,\r\n\t\t\tfileId: '',\r\n\t\t\tfileName: '',\r\n      showBackdrop: false,\r\n      showSnackBar: false,\r\n      snackBarMessage: '',\r\n      snackBarSeverity: 'success'\r\n    };\r\n    this.handleCloseTaskDetails = this.handleCloseTaskDetails.bind(this);\r\n    this.onChangePage = this.onChangePage.bind(this);\r\n    this.handleCloseDocumentDialogView = this.handleCloseDocumentDialogView.bind(this);\r\n    this.handleSnackBarClose = this.handleSnackBarClose.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.taskService = new Tasks(this.props);\r\n    this.getTasks();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.page !== this.state.page) {\r\n      this.getTasks();\r\n    }\r\n  }\r\n\r\n  getTasks() {\r\n    this.setState({ showBackdrop: true });\r\n    this.taskService.getTasks(this.state.page * 10).then(res => {\r\n      if (res && res.data && res.data._embedded) {\r\n        if (!res.data._links.next || res.data._embedded.tasks.length < 10) {\r\n          this.setState({\r\n            count: this.state.page * 10 + res.data._embedded.tasks.length,\r\n            tasks: res.data._embedded.tasks\r\n          });\r\n        }\r\n      } else {\r\n        this.setState({\r\n          count: 0,\r\n          tasks: []\r\n        });\r\n      }\r\n    }).finally(() => {\r\n      this.setState({ showBackdrop: false });\r\n    })\r\n  }\r\n\r\n  onChangePage(page) {\r\n    this.setState({ page: page });\r\n  }\r\n\r\n  claimTask(taskId) {\r\n    this.setState({ showBackdrop: true });\r\n    this.taskService.claimTask(taskId)\r\n      .then(() => {\r\n        this.getTasks();\r\n      })\r\n  }\r\n\r\n  completeTask(taskId, approve) {\r\n    this.setState({ showBackdrop: true });\r\n    this.taskService.completeTask(taskId, approve)\r\n      .then(() => {\r\n        this.getTasks();\r\n        this.setState({\r\n          snackBarMessage: 'Contract ' + (approve ? 'approved' : 'rejected') + ' successfully.',\r\n          showSnackBar: true\r\n        });\r\n      })\r\n      .catch(error => {\r\n        let errorMessage = 'Could not ' + (approve ? 'approve ' : 'reject ') + 'task: ';\r\n        if (error.response != null && error.response.data != null) {\r\n          errorMessage += error.response.data.exception;\r\n        } else {\r\n          errorMessage += error.message;\r\n        }\r\n        this.setState({\r\n          snackBarSeverity: 'error',\r\n          snackBarMessage: errorMessage,\r\n          showSnackBar: true\r\n        });\r\n      })\r\n      .finally(() => {\r\n        this.setState({ showBackdrop: false })\r\n      });\r\n  }\r\n\r\n  showDetails(task) {\r\n    this.setState({\r\n      selectedTask: task,\r\n      detailsOpen: true\r\n    });\r\n  }\r\n\r\n  getContractName(task) {\r\n    if (task && task.variables) {\r\n      return task.variables.find((q) => q.name === \"contract\").value.name;\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  getContractValue(task) {\r\n    if (task && task.variables) {\r\n      const found = task.variables.find((q) => q.name === \"contract\");\r\n      return found.value.properties ? found.value.properties.value : \"\";\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  getContract(task) {\r\n    if (task && task.variables) {\r\n      const found = task.variables.find((q) => q.name === \"contract\");\r\n      return found.value.properties ? found.value : \"\";\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  getDateValue(task) {\r\n    return task && task.createTime ? new Date(Date.parse(task.createTime)).toLocaleString() : '';\r\n  }\r\n\r\n  handleCloseTaskDetails() {\r\n    this.setState({ detailsOpen: false })\r\n  }\r\n\r\n  handleCloseDocumentDialogView() {\r\n    this.setState({ openDocumentDialogView: false })\r\n  }\r\n\r\n  handleSnackBarClose() {\r\n    this.setState({ showSnackBar: false });\r\n  }\r\n\r\n  openDocumentDialogView(fileId, fileName) {\r\n\t\tthis.setState({\r\n\t\t\topenDocumentDialogView: true,\r\n\t\t\tfileId: fileId,\r\n\t\t\tfileName: fileName\r\n\t\t});\r\n\t}\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className='content-header'>All Tasks</div>\r\n        <TableContainer component={Paper}>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell align=\"left\">Contract name</TableCell>\r\n                <TableCell align=\"left\">Creation date</TableCell>\r\n                <TableCell align=\"left\">Value</TableCell>\r\n                <TableCell align=\"left\">Risk classification</TableCell>\r\n                <TableCell align=\"left\">Assignee</TableCell>\r\n                <TableCell align=\"left\">View document</TableCell>\r\n                <TableCell align=\"left\">Action</TableCell>\r\n                <TableCell align=\"center\" />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {this.state.tasks.map((row) => (\r\n                <TableRow key={row.id}>\r\n                  <TableCell align=\"left\">{this.getContractName(row)}</TableCell>\r\n                  <TableCell align=\"left\">{this.getDateValue(row)}</TableCell>\r\n                  <TableCell align=\"left\">{this.getContractValue(row)}</TableCell>\r\n                  <TableCell align=\"left\"><RiskClassification row={this.getContract(row)} /></TableCell>\r\n                  <TableCell align=\"left\">{row.assignee || \"\"}</TableCell>\r\n                  <TableCell align=\"left\">\r\n                    <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.openDocumentDialogView(this.getContract(row).id, this.getContractName(row)) }}>Original</Button>\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {!row.assignee\r\n                      ? <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.claimTask(row.id) }}>Claim</Button>\r\n                      : <ButtonGroup>\r\n                        <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.completeTask(row.id, true) }}>Approve</Button>\r\n                        <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.completeTask(row.id, false) }}>Reject</Button>\r\n                      </ButtonGroup>\r\n                    }\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton size=\"small\" variant=\"outlined\" color=\"primary\" title=\"Show details\" onClick={() => { this.showDetails(row) }}>\r\n                      <ArrowForwardIosIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Pagination pageNumber={this.state.page} count={this.state.count} handlePageNumber={this.onChangePage} />\r\n        <TaskDetails open={this.state.detailsOpen} selectedTask={this.state.selectedTask} onClose={this.handleCloseTaskDetails} />\r\n        <DocumentDialogView open={this.state.openDocumentDialogView} fileId={this.state.fileId} onClose={this.handleCloseDocumentDialogView} />\r\n        <Backdrop style={{ zIndex: 9999 }} open={this.state.showBackdrop}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'center',\r\n            }}\r\n            open={this.state.showSnackBar}\r\n            autoHideDuration={5000}\r\n            onClose={this.handleSnackBarClose}\r\n            action={\r\n              <React.Fragment>\r\n                <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={this.handleSnackBarClose}>\r\n                  <CloseIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </React.Fragment>\r\n            }\r\n        >\r\n          <Alert onClose={this.handleSnackBarClose} severity={this.state.snackBarSeverity}>\r\n            {this.state.snackBarMessage}\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TasksList;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tTab,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableRow,\r\n\tTabs,\r\n\tTextField\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n\taxios,\r\n\tuseAuth\r\n} from './authorization/ocpRestClient';\r\nimport TabPanel from './TabPanel';\r\n\r\nconst baseUrl = process.env.REACT_APP_BASE_URL;\r\n\r\nfunction ContractDetails ({ parentRaiseError, parent, open, onClose, selectedContract }) {\r\n\tconst openRef = useRef(open);\r\n\tconst selectedContractRef = useRef(selectedContract);\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [contract, setContract] = useState({\r\n\t\tname: '',\r\n\t\tproperties: {},\r\n\t\ttraits: {},\r\n\t\tcreate_time: ''\r\n\t});\r\n\tconst [contractAcl, setContractAcl] = useState();\r\n\tconst { authService } = useAuth();\r\n\r\n\tconst getApprovals = (trait) => {\r\n\t\tlet approvals = [];\r\n\t\r\n\t\tfor (let key in trait) {\r\n\t\t\tlet approval = trait[key];\r\n\t\t\tapproval['trait_name'] = key;\r\n\t\t\tapprovals.push(approval);\r\n\t\t}\r\n\t\t\r\n\t\treturn approvals.sort((a, b) => a.trait_name < b.trait_name ? -1 : 1);\r\n\t}\r\n\t\r\n\tconst ensureNonNullStringValue = (propertyValue) => {\r\n\t\tlet stringValue;\r\n\t\r\n\t\tif (typeof propertyValue == \"boolean\") {\r\n\t\t\tstringValue = propertyValue.toString();\r\n\t\t} else if (propertyValue) {\r\n\t\t\tstringValue = propertyValue;\r\n\t\t} else {\r\n\t\t\tstringValue = '';\r\n\t\t}\r\n\t\r\n\t\treturn stringValue;\r\n\t}\r\n\r\n\tconst handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\tconst getDateValue = (dt) => {\r\n\t\treturn dt ? new Date(Date.parse(dt)).toLocaleString() : '';\r\n\t};\r\n\r\n\tuseEffect (() => {\r\n\t\tconst raiseError = (errorMessage) => {\r\n\t\t\tonClose();\r\n\t\t\tparentRaiseError(parent, errorMessage);\r\n\t\t};\r\n\r\n\t\tconst fetchSelectedContract = async () => {\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: `${baseUrl}/cms/instances/file/${selectedContract.type}/${selectedContract.id}`,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n\t\t\t\t}\r\n\t\t\t}).then(res => {\r\n\t\t\t\tsetContract(res.data);\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tlet errorMessage = `Could not fetch ${selectedContract.type} with Id ${selectedContract.id}: `;\r\n\t\t\t\tif (error.response != null && error.response.data != null) {\r\n\t\t\t\t\terrorMessage += error.response.data.exception;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage += error.message;\r\n\t\t\t\t}\r\n\t\t\t\traiseError(errorMessage);\r\n\t\t\t})\r\n\t\t};\r\n\t\r\n\t\tconst fetchAclForSelectedContract = async () => {\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: `${baseUrl}/cms/instances/file/${selectedContract.type}/${selectedContract.id}/acl`,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n\t\t\t\t}\r\n\t\t\t}).then(res => {\r\n\t\t\t\tsetContractAcl(res.data);\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tlet errorMessage = `Could not fetch ACL for ${selectedContract.type} with Id ${selectedContract.id}: `;\r\n\t\t\t\tif (error.response != null && error.response.data != null) {\r\n\t\t\t\t\terrorMessage += error.response.data.exception;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage += error.message;\r\n\t\t\t\t}\r\n\t\t\t\traiseError(errorMessage);\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\tif (openRef.current !== open || selectedContractRef.current !== selectedContract) {\r\n\t\t\topenRef.current = open;\r\n\t\t\tselectedContractRef.current = selectedContract;\r\n\t\t\tsetContract({});\r\n\t\t\tfetchSelectedContract();\r\n\t\t\tfetchAclForSelectedContract();\r\n\t\t}\r\n\t}, [open, selectedContract, authService, onClose, parent, parentRaiseError]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{\r\n\t\t\t\tcontract.id &&\r\n\t\t\t\t<Dialog open={open} aria-labelledby=\"form-dialog-title\">\r\n\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Contract details</DialogTitle>\r\n\t\t\t\t\t<DialogContent  className=\"contract-details\">\r\n\t\t\t\t\t<Tabs orientation=\"horizontal\" value={value}\tonChange={handleChange}>\r\n\t\t\t\t\t\t<Tab className=\"tab-caption\" label=\"Properties\" />\r\n\t\t\t\t\t\t<Tab className=\"tab-caption\" label=\"Permissions\" />\r\n\t\t\t\t\t\t<Tab className=\"tab-caption\" label=\"Approvals\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"contract-name\"\r\n\t\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\t\tvalue={contract.name}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"contract-status\"\r\n\t\t\t\t\t\t\tlabel=\"Status\"\r\n\t\t\t\t\t\t\tvalue={contract.properties.status}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"contract-value\"\r\n\t\t\t\t\t\t\tlabel=\"Value\"\r\n\t\t\t\t\t\t\tvalue={contract.properties.value}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcontract.type === 'ca_loan_contract' &&\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tid=\"monthly-installments\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Monthly installments\"\r\n\t\t\t\t\t\t\t\t\tvalue={contract.properties.monthly_installments}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tid=\"yearly-income\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Yearly income\"\r\n\t\t\t\t\t\t\t\t\tvalue={contract.properties.yearly_income}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"contract-risk\"\r\n\t\t\t\t\t\t\tlabel=\"Risk classification\"\r\n\t\t\t\t\t\t\tvalue={contract.properties.risk_classification}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"createTime\"\r\n\t\t\t\t\t\t\tlabel=\"Creation date\"\r\n\t\t\t\t\t\t\tvalue={getDateValue(contract.create_time)}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tInputLabelProps={{ shrink: true, }}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\tid=\"contract-requester-email\"\r\n\t\t\t\t\t\t\tlabel=\"Contract requester email\"\r\n\t\t\t\t\t\t\tvalue={contract.properties.requester_email}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcontractAcl?.permits &&\r\n\t\t\t\t\t\t\t<TableContainer>\r\n\t\t\t\t\t\t\t\t<Table>\r\n\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">Identity</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">Permissions</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t{contractAcl.permits\r\n\t\t\t\t\t\t\t\t\t\t  .map((permit) => ({ ...permit, display_name: (ensureNonNullStringValue(permit.identity_type) === \"subscription_group\" ? permit.group_name : permit.identity) }))\r\n\t\t\t\t\t\t\t\t\t\t  .sort((permita, permitb) => permita.display_name > permitb.display_name ? 1 : -1)\r\n\t\t\t\t\t\t\t\t\t\t\t.map((permit) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={permit.identity}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"left\" style={{ verticalAlign: 'top' }}>{permit.display_name}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"left\" style={{ verticalAlign: 'top' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{permit.permissions.sort((permissiona, permissionb) => permissiona > permissionb ? 1 : -1).map((permission) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={permission}>{permission}</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t<TabPanel value={value} index={2}>\r\n\t\t\t\t\t\t<TableContainer>\r\n\t\t\t\t\t\t\t<Table>\r\n\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">Required</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">Granted</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">Approver</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">Approver role</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">Approval date</TableCell>\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t{getApprovals(contract.traits.ca_approval).map((approval) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow key={approval.trait_name}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell component=\"th\" scope=\"row\">{ensureNonNullStringValue(approval.trait_name)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{ensureNonNullStringValue(approval.is_required)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{ensureNonNullStringValue(approval.has_been_granted)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{ensureNonNullStringValue(approval.approver)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{ensureNonNullStringValue(approval.approver_role)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"right\">{ensureNonNullStringValue(approval.approval_date)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={() => { onClose() }} variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ContractDetails;\r\n","import axios from 'axios';\r\n\r\nexport default class RiskGuard {\r\n  constructor(props) {\r\n    this.props = props;\r\n  }\r\n\r\n  async processDoc(fileData, fileName) {\r\n    let form = new FormData();\r\n    form.append('File', fileData, fileName);\r\n    let postRequest = {\r\n      method: \"post\",\r\n      url: process.env.REACT_APP_BASE_URL + '/mtm-riskguard/api/v1/process',\r\n      headers: {\r\n\t\t\t\t'Authorization': this.props.authContext.headers.Authorization,\r\n\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t},\r\n      data: form,\r\n    };\r\n  \r\n    return new Promise((resolve, reject) => {\r\n      axios(postRequest).then((postResponse) => {\r\n        resolve({\r\n          data: this.calculateRisk(postResponse)\r\n        });\r\n      }).catch(response => {\r\n        reject(response.response);\r\n      });\r\n    });\r\n  }\r\n\r\n  calculateRisk = (rgResponse) => {\r\n    let extractedSSN = ['**Social Security Numbers:'];\r\n    let extractedCC = ['**Credit Card Numbers:'];\r\n    let extractedBA = ['**Bank Accounts:'];\r\n    let extractedPN = ['**Person Names:'];\r\n    let extractedPhone = ['**Phone Numbers:'];\r\n    let extractedAddress = ['**Addresses:'];\r\n    let extractedGL = ['**Geographic Locations:'];\r\n    let extractedON = ['**Organization Names:'];\r\n  \r\n    let riskClassification = 1;\r\n    let personNameCount = 0;\r\n    let phoneNumberCount = 0;\r\n    rgResponse.data.results.tme.result.Results.nfinder[0].nfExtract[0].ExtractedTerm.forEach(extractedTerm => {\r\n      const cartridgeID = extractedTerm.CartridgeID;\r\n  \r\n      switch (cartridgeID) {\r\n        case 'PN':\r\n          if (extractedTerm.ConfidenceScore > 60) {\r\n            if (extractedTerm.nfinderNormalized) {\r\n              extractedPN.push(extractedTerm.nfinderNormalized);\r\n            }\r\n            else if (extractedTerm.MainTerm.value) {\r\n              extractedPN.push(extractedTerm.MainTerm.value);\r\n            }\r\n            personNameCount++;\r\n          }\r\n          break;\r\n        case 'Phone':\r\n          if (extractedTerm.ConfidenceScore > 60) {\r\n            extractedPhone.push(extractedTerm.nfinderNormalized);\r\n            phoneNumberCount++;\r\n          }\r\n          break;\r\n        case 'Address':\r\n          if (extractedTerm.ConfidenceScore > 60) {\r\n            extractedAddress.push(extractedTerm.nfinderNormalized);\r\n          }\r\n          break;\r\n        case 'GL':\r\n          if (extractedTerm.ConfidenceScore > 60) {\r\n            extractedGL.push(extractedTerm.MainTerm.value);\r\n          }\r\n          break;\r\n        case 'ON':\r\n          if (extractedTerm.ConfidenceScore > 60) {\r\n            if (extractedTerm.nfinderNormalized) {\r\n              extractedON.push(extractedTerm.nfinderNormalized);\r\n            }\r\n            else if (extractedTerm.MainTerm.value) {\r\n              extractedON.push(extractedTerm.MainTerm.value);\r\n            }\r\n          }\r\n          break;\r\n        case 'SSN':\r\n          extractedSSN.push(extractedTerm.ClientNormalized);\r\n          if (riskClassification < 5) {\r\n            riskClassification = 5;\r\n          }\r\n          break;\r\n        case 'CreditCard':\r\n          extractedCC.push(extractedTerm.ClientNormalized);\r\n          if (riskClassification < 4) {\r\n            riskClassification = 4;\r\n          }\r\n          break;\r\n        case 'BankAccount':\r\n          extractedBA.push(extractedTerm.ClientNormalized);\r\n          if (riskClassification < 2) {\r\n            riskClassification = 2;\r\n          }\r\n          break;\r\n        default:\r\n          // Do nothing\r\n      }\r\n      if (riskClassification < 3 && (personNameCount >= 5 || (personNameCount > 2 && phoneNumberCount > 2))) {\r\n        riskClassification = 3;\r\n      }\r\n    });\r\n  \r\n    let extractedTerms = [].concat(extractedSSN, extractedCC, extractedBA, extractedPN, extractedPhone, extractedAddress, extractedGL, extractedON);\r\n  \r\n    return {\r\n      \"riskClassification\": riskClassification,\r\n      \"extractedTerms\": extractedTerms\r\n    };\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nconst ApplicationContext = React.createContext();\r\n\r\nexport const ApplicationProvider = ({ children }) => {\r\n    const [appRootFolderId, setAppRootFolderId] = useState('');\r\n\r\n    const updateAppRootFolderId = (appRootFolderId) => {\r\n        setAppRootFolderId(appRootFolderId);\r\n    }\r\n\r\n    return <ApplicationContext.Provider value={{ appRootFolderId: appRootFolderId, updateAppRootFolderId }}>\r\n        {children}\r\n    </ApplicationContext.Provider>;\r\n}\r\n\r\nexport default ApplicationContext;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n\tButton,\r\n\tBackdrop,\r\n\tCircularProgress,\r\n\tTextField,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tFormControlLabel,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tRadio,\r\n\tRadioGroup,\r\n\tSelect,\r\n\tFormControl,\r\n} from \"@material-ui/core\";\r\nimport RiskGuard from './services/riskguard/RiskGuard';\r\nimport ApplicationContext from './context/ApplicationContext';\r\n\r\nconst baseUrl = process.env.REACT_APP_BASE_URL;\r\n\r\nclass AddContract extends React.Component {\r\n\tstatic contextType = ApplicationContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.handleChangeContractType = this.handleChangeContractType.bind(this);\r\n\t\tthis.handleChangeContractName = this.handleChangeContractName.bind(this);\r\n\t\tthis.handleChangeContractValue = this.handleChangeContractValue.bind(this);\r\n\t\tthis.handleChangeContractRequesterEmail = this.handleChangeContractRequesterEmail.bind(this);\r\n\t\tthis.handleChangeContractMonthlyInstallments = this.handleChangeContractMonthlyInstallments.bind(this);\r\n\t\tthis.handleChangeContractYearlyIncome = this.handleChangeContractYearlyIncome.bind(this);\r\n\t\tthis.canSubmit = this.canSubmit.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tshowBackdrop: false,\r\n\t\t\tselectedContract: {\r\n\t\t\t\tnewContractType: '',\r\n\t\t\t\tnewContractName: '',\r\n\t\t\t\tnewContractValue: '',\r\n\t\t\t\tnewContractRequesterEmail: '',\r\n\t\t\t\tnewContractMonthlyInstallments: '',\r\n\t\t\t\tnewContractYearlyIncome: '',\r\n\t\t\t\tselectedFile: ''\r\n\t\t\t},\r\n\t\t\triskGuard: {\r\n\t\t\t\tcontractRisk: '',\r\n\t\t\t\textractedTerms: ''\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tcloseDialog() {\r\n\t\tthis.setState({\r\n\t\t\tnewContractType: '',\r\n\t\t\tnewContractName: '',\r\n\t\t\tnewContractValue: '',\r\n\t\t\tnewContractRequesterEmail: '',\r\n\t\t\tnewContractMonthlyInstallments: '',\r\n\t\t\tnewContractYearlyIncome: '',\r\n\t\t\tshowBackdrop: false\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t}\r\n\r\n\tselectFile = event => {\r\n\t\tlet selectedFile = event.target.files[0];\r\n\t\tthis.setState({ selectedFile: selectedFile });\r\n\t\tthis.fileNameText.innerHTML = selectedFile.name;\r\n\t\tif (! /\\.pdf$/.test(selectedFile.name)) {\r\n\t\t\tthis.fileNameText.innerHTML += \"<br/><b>Note: This application only supports pdf files.</b>\";\r\n\t\t}\r\n\t}\r\n\r\n\tsetFileNameInputRef = element => {\r\n\t\tthis.fileNameText = element;\r\n\t}\r\n\r\n\thandleChangeContractType(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractType: event.target.value,\r\n\t\t\tnewContractMonthlyInstallments: '',\r\n\t\t\tnewContractYearlyIncome: ''\r\n\t\t});\r\n\t}\r\n\r\n\thandleChangeContractName(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractName: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleChangeContractValue(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractValue: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleChangeContractRequesterEmail(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractRequesterEmail: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleChangeContractMonthlyInstallments(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractMonthlyInstallments: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleChangeContractYearlyIncome(event) {\r\n\t\tthis.setState({\r\n\t\t\tnewContractYearlyIncome: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\tasync submitContract() {\r\n\t\tthis.setState({ showBackdrop: true });\r\n\t\tconst riskGuardService = new RiskGuard(this.props);\r\n\t\tconst risk = await riskGuardService.processDoc(this.state.selectedFile, this.state.selectedFile.name);\r\n\t\tthis.setState({\r\n\t\t\tcontractRisk: risk.data.riskClassification,\r\n\t\t\textractedTerms: risk.data.extractedTerms\r\n\t\t});\r\n\r\n\t\t// Check for application root folder, and if not existing, create it\r\n\t\tif (this.context.appRootFolderId === '') {\r\n\t\t\tawait axios.get(\r\n\t\t\t\tbaseUrl + '/cms/instances/folder/cms_folder?filter=name eq \\'Contract Approval App\\'',\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t\t}\r\n\t\t\t).then(res => {\r\n\t\t\t\tif (res.data._embedded) {\r\n\t\t\t\t\tlet appRootFolderId = res.data._embedded.collection[0].id;\r\n\t\t\t\t\tconst { updateAppRootFolderId } = this.context;\r\n\t\t\t\t\tupdateAppRootFolderId(appRootFolderId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (this.context.appRootFolderId === '') {\r\n\t\t\tawait axios.post(\r\n\t\t\t\tbaseUrl + '/cms/instances/folder/cms_folder',\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"Contract Approval App\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t\t}\r\n\t\t\t).then(res => {\r\n\t\t\t\tif (res.data) {\r\n\t\t\t\t\tlet appRootFolderId = res.data.id;\r\n\t\t\t\t\tconst { updateAppRootFolderId } = this.context;\r\n\t\t\t\t\tupdateAppRootFolderId(appRootFolderId);\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tconst statusCode = error.response.status;\r\n\t\t\t\tlet errorMessage;\r\n\t\t\t\tif (statusCode === 401) {\r\n\t\t\t\t\t// Unauthorized access\r\n\t\t\t\t\terrorMessage = 'Error creating App Root Folder: You are not authorized to access this resource. Your session might have timed out.';\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage = `Error creating App Root Folder: ${JSON.stringify(error.response.data, null, 2)}`;\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.onAddContract(\"Error creating contract: \" + errorMessage);\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\t// Check for customer folder, and if not existing, create it\r\n\t\tconst appRootFolderId = this.context.appRootFolderId;\r\n\t\tconst customerEmail = this.state.newContractRequesterEmail;\r\n\r\n\t\tlet parentFolderId = '';\r\n\t\tawait axios.get(\r\n\t\t\t`${baseUrl}/cms/instances/folder/ca_customer?filter=parent_folder_id eq '${appRootFolderId}' and name eq '${encodeURIComponent(customerEmail)}'`,\r\n\t\t\t{\r\n\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t}\r\n\t\t).then(res => {\r\n\t\t\tif (res.data._embedded) {\r\n\t\t\t\tparentFolderId = res.data._embedded.collection[0].id;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (parentFolderId === '') {\r\n\t\t\tawait axios.post(\r\n\t\t\t\tbaseUrl + '/cms/instances/folder/ca_customer',\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": customerEmail,\r\n\t\t\t\t\t\"parent_folder_id\": appRootFolderId,\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"customer_email\": customerEmail\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t\t}\r\n\t\t\t).then(res => {\r\n\t\t\t\tif (res.data) {\r\n\t\t\t\t\tparentFolderId = res.data.id;\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tconst statusCode = error.response.status;\r\n\t\t\t\tlet errorMessage;\r\n\t\t\t\tif (statusCode === 401) {\r\n\t\t\t\t\t// Unauthorized access\r\n\t\t\t\t\terrorMessage = 'Error creating Customer Folder: You are not authorized to access this resource. Your session might have timed out.';\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage = `Error creating Customer Folder: ${JSON.stringify(error.response.data, null, 2)}`;\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.onAddContract(\"Error creating contract: \" + errorMessage);\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\t// Get the ID of the 'Created' ACL\r\n\t\tlet aclId = '';\r\n\t\tawait axios.get(\r\n\t\t\t`${baseUrl}/cms/permissions?filter=name eq 'created'`,\r\n\t\t\t{\r\n\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t}\r\n\t\t).then(res => {\r\n\t\t\tif (res.data._embedded) {\r\n\t\t\t\taclId = res.data._embedded.collection[0].id;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Adding Contract\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\r\n\t\t\t'file',\r\n\t\t\tthis.state.selectedFile,\r\n\t\t\tthis.state.selectedFile.name,\r\n\t\t);\r\n\t\taxios.post(\r\n\t\t\tbaseUrl +  '/css/v2/tenant/' + process.env.REACT_APP_TENANT_ID + '/content?avs-scan=false',\r\n\t\t\tformData,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t\t'Authorization': this.props.authContext.headers.Authorization\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t).then(res => {\r\n\t\t\tlet cmsType;\r\n\t\t\tif (this.isLoanContract()) {\r\n\t\t\t\tcmsType = 'ca_loan_contract'\r\n\t\t\t} else {\r\n\t\t\t\tcmsType = 'ca_contract'\r\n\t\t\t}\r\n\r\n\t\t\t// Setting metadata\r\n\t\t\treturn axios({\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\turl: `${baseUrl}/cms/instances/file/${cmsType}`,\r\n\t\t\t\theaders: this.props.authContext.headers,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\t\"name\": this.state.newContractName,\r\n\t\t\t\t\t\"parent_folder_id\": parentFolderId,\r\n\t\t\t\t\t\"acl_id\": aclId,\r\n\t\t\t\t\t\"renditions\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"name\": res.data.entries[0].fileName,\r\n\t\t\t\t\t\t\t\"rendition_type\": \"primary\",\r\n\t\t\t\t\t\t\t\"blob_id\": res.data.entries[0].id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  \"name\": \"Brava rendition\",\r\n\t\t\t\t\t\t  \"mime_type\": \"application/vnd.blazon+json\",\r\n\t\t\t\t\t\t  \"rendition_type\": \"SECONDARY\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"value\": parseInt(this.state.newContractValue, 10),\r\n\t\t\t\t\t\t\"status\": \"CREATED\",\r\n\t\t\t\t\t\t\"requester_email\": customerEmail,\r\n\t\t\t\t\t\t\"risk_classification\": this.state.contractRisk,\r\n\t\t\t\t\t\t\"extracted_terms\": this.state.extractedTerms,\r\n\t\t\t\t\t\t...this.isLoanContract() && {\r\n\t\t\t\t\t\t\t\"monthly_installments\": parseInt(this.state.newContractMonthlyInstallments),\r\n\t\t\t\t\t\t\t\"yearly_income\": parseInt(this.state.newContractYearlyIncome)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"traits\": {\r\n\t\t\t\t\t\t\"ca_approval\": {\r\n\t\t\t\t\t\t\t\"Automatic Approval\": {\r\n\t\t\t\t\t\t\t\t\"is_required\": true,\r\n\t\t\t\t\t\t\t\t\"has_been_granted\": false,\r\n\t\t\t\t\t\t\t\t\"approver\": \"\",\r\n\t\t\t\t\t\t\t\t\"approver_role\": \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"Line Manager Approval\": {\r\n\t\t\t\t\t\t\t\t\"is_required\": false,\r\n\t\t\t\t\t\t\t\t\"has_been_granted\": false,\r\n\t\t\t\t\t\t\t\t\"approver\": \"\",\r\n\t\t\t\t\t\t\t\t\"approver_role\": \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"Risk Manager Approval\": {\r\n\t\t\t\t\t\t\t\t\"is_required\": false,\r\n\t\t\t\t\t\t\t\t\"has_been_granted\": false,\r\n\t\t\t\t\t\t\t\t\"approver\": \"\",\r\n\t\t\t\t\t\t\t\t\"approver_role\": \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t...this.isLoanContract() && {\r\n\t\t\t\t\t\t\t\t\"Solvency Check\": {\r\n\t\t\t\t\t\t\t\t\t\"is_required\": true,\r\n\t\t\t\t\t\t\t\t\t\"has_been_granted\": false,\r\n\t\t\t\t\t\t\t\t\t\"approver\": \"\",\r\n\t\t\t\t\t\t\t\t\t\"approver_role\": \"\",\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t}).then(() => {\r\n\t\t\tthis.closeDialog();\r\n\t\t\tthis.props.onAddContract();\r\n\t\t}).catch(error => {\r\n\t\t\tconst statusCode = error.response.status;\r\n\t\t\tlet errorMessage;\r\n\t\t\tif (statusCode === 400) {\r\n\t\t\t\t// Validation error\r\n\t\t\t\terrorMessage = 'The parameter name is mandatory';\r\n\t\t\t} else if (statusCode === 401) {\r\n\t\t\t\t// Unauthorized access\r\n\t\t\t\terrorMessage = 'You are not authorized to access this resource. Your session might have timed out.';\r\n\t\t\t} else {\r\n\t\t\t\terrorMessage = JSON.stringify(error.response.data, null, 2);\r\n\t\t\t}\r\n\t\t\tthis.props.onAddContract(\"Error creating contract: \" + errorMessage);\r\n\t\t}).finally(() => {\r\n\t\t\tthis.setState({ showBackdrop: false });\r\n\t\t})\r\n\t}\r\n\r\n\tcanSubmit() {\r\n\t\treturn (\r\n\t\t\tthis.state.newContractName &&\r\n\t\t\tthis.state.newContractValue > 0 &&\r\n\t\t\tthis.state.selectedFile &&\r\n\t\t\tthis.state.newContractRequesterEmail &&\r\n\t\t\t(\r\n\t\t\t\t!this.isLoanContract() ||\r\n\t\t\t\t(\r\n\t\t\t\t\tthis.state.newContractMonthlyInstallments > 0 &&\r\n\t\t\t\t\tthis.state.newContractYearlyIncome > 0\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\tisLoanContract() {\r\n\t\treturn this.state.newContractType === \"loan-contract\";\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Dialog open={this.props.open} aria-labelledby=\"form-dialog-title\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">Add Contract</DialogTitle>\r\n\t\t\t\t<DialogContent className=\"add-contract\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div className=\"inline\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"files\" className=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary\">Select Document</label>\r\n\t\t\t\t\t\t\t<input id=\"files\" type=\"file\" accept=\"application/pdf\" className=\"file-input\" onChange={this.selectFile} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div id=\"fileName\" className=\"inline margin-start\" ref={this.setFileNameInputRef} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\trow\r\n\t\t\t\t\t\tdefaultValue=\"standard-contract\"\r\n\t\t\t\t\t\tname=\"contract-types-radio-buttons-group\"\r\n\t\t\t\t\t\tonChange={this.handleChangeContractType}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FormControlLabel value=\"standard-contract\" control={<Radio />} label=\"Standard Contract\" size=\"small\" />\r\n\t\t\t\t\t\t<FormControlLabel value=\"loan-contract\" control={<Radio />} label=\"Loan Contract\" />\r\n\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\tid=\"contract-name\"\r\n\t\t\t\t\t\tlabel=\"Document name\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tonChange={this.handleChangeContractName}\r\n\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\tid=\"contract-value\"\r\n\t\t\t\t\t\tlabel=\"Contract value\"\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tInputProps={{ inputProps: { min: 1 } }}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tonChange={this.handleChangeContractValue}\r\n\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.isLoanContract() &&\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<FormControl fullWidth>\r\n\t\t\t\t\t\t\t<InputLabel id=\"contract-monthly-installments-label\">Monthly installments</InputLabel>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tlabelId=\"contract-monthly-installments-label\"\r\n\t\t\t\t\t\t\t\t\tid=\"contract-monthly-installments\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Monthly installments\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeContractMonthlyInstallments}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={12}>12</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={24}>24</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={36}>36</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={48}>48</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={60}>60</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={72}>72</MenuItem>\r\n\t\t\t\t\t\t\t\t\t<MenuItem value={84}>84</MenuItem>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\tid=\"contract-yearly-income\"\r\n\t\t\t\t\t\t\t\tlabel=\"Yearly income\"\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\t\t\tInputProps={{ inputProps: { min: 1 } }}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tonChange={this.handleChangeContractYearlyIncome}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\tid=\"contract-requester-email\"\r\n\t\t\t\t\t\tlabel=\"Contract requester email\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tonChange={this.handleChangeContractRequesterEmail}\r\n\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => { this.submitContract() }} variant=\"contained\" color=\"primary\"\r\n\t\t\t\t\t\tdisabled={!this.canSubmit()}>\r\n\t\t\t\t\t\tAdd\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => { this.closeDialog() }} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t\t<Backdrop style={{ zIndex: 9999 }} open={this.state.showBackdrop}>\r\n\t\t\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t\t\t</Backdrop>\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default AddContract;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n\tBackdrop,\r\n\tButton,\r\n\tCircularProgress,\r\n\tIconButton,\r\n\tPaper,\r\n\tSnackbar,\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableContainer,\r\n\tTableHead,\r\n\tTableRow\r\n} from '@material-ui/core';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport ContractDetails from './ContractDetails';\r\nimport AddContract from './AddContract';\r\nimport Pagination from './Pagination';\r\nimport DocumentDialogView from './DocumentDialogView';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport RiskClassification from './RiskClassification';\r\n\r\nconst baseUrl = process.env.REACT_APP_BASE_URL;\r\n\r\nconst Alert = (props) => {\r\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n/**\r\n * This view displays the list of created contracts. From here the user can request approval for any of them.\r\n */\r\nclass CreatedContractList extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcontracts: [],\r\n\t\t\tlineManagerAclId: '',\r\n\t\t\triskManagerAclId: '',\r\n\t\t\tcompletedAclId: '',\r\n\t\t\topenContractDetails: false,\r\n\t\t\tselectedContract: { properties: {} },\r\n\t\t\topenAddContract: false,\r\n\t\t\taddNumberOfContracts: 0,\r\n\t\t\tpageNumber: 0,\r\n\t\t\tcount: -1,\r\n\t\t\topenDocumentDialogView: false,\r\n\t\t\tfileId: '',\r\n\t\t\tfileName: '',\r\n\t\t\tshowBackdrop: false,\r\n\t\t\tshowSnackBar: false,\r\n\t\t\tsnackBarMessage: '',\r\n\t\t\tsnackBarSeverity: 'success'\r\n\t\t};\r\n\t\tthis.handleCloseAddContract = this.handleCloseAddContract.bind(this);\r\n\t\tthis.handleCloseContractDetails = this.handleCloseContractDetails.bind(this);\r\n\t\tthis.handleCloseDocumentDialogView = this.handleCloseDocumentDialogView.bind(this);\r\n\t\tthis.handleSnackBarClose = this.handleSnackBarClose.bind(this);\r\n\t\tthis.handlePageNumber = this.handlePageNumber.bind(this);\r\n\t}\r\n\r\n\thandleContractAdded = (errorMessage) => {\r\n\t\tif (!errorMessage) {\r\n\t\t\tthis.setState({\r\n\t\t\t\taddNumberOfContracts: this.state.addNumberOfContracts + 1,\r\n\t\t\t\tsnackBarSeverity: 'success',\r\n\t\t\t\tsnackBarMessage: 'Contract added successfully'\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsnackBarSeverity: 'error',\r\n\t\t\t\tsnackBarMessage: errorMessage\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.setState({ showSnackBar: true });\r\n\t}\r\n\r\n\thandleCloseAddContract() {\r\n\t\tthis.setState({ openAddContract: false })\r\n\t}\r\n\r\n\thandleCloseContractDetails() {\r\n\t\tthis.setState({ openContractDetails: false })\r\n\t}\r\n\r\n\thandleCloseDocumentDialogView() {\r\n\t\tthis.setState({ openDocumentDialogView: false })\r\n\t}\r\n\r\n\thandleSnackBarClose() {\r\n\t\tthis.setState({ showSnackBar: false });\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getAcls();\r\n\t\tthis.getContracts();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (prevState.addNumberOfContracts !== this.state.addNumberOfContracts\r\n\t\t\t|| prevState.pageNumber !== this.state.pageNumber\r\n\t\t) {\r\n\t\t\tthis.getContracts();\r\n\t\t}\r\n\t}\r\n\r\n\thandlePageNumber(pageNumber) {\r\n\t\tthis.setState({ pageNumber: pageNumber });\r\n\t}\r\n\r\n\tgetContracts() {\r\n\t\tif (this.props.authContext.userName) {\r\n\t\t\tthis.setState({ showBackdrop: true });\r\n\t\t\taxios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: baseUrl + '/cms/instances/file/ca_contract/?include-total=true&sortby=create_time desc&filter=status eq \"CREATED\"&page='\r\n\t\t\t\t\t+ (this.state.pageNumber + 1),\r\n\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t}).then(res => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcontracts: res.data && res.data._embedded ? res.data._embedded.collection : [],\r\n\t\t\t\t\tcount: res.data.total\r\n\t\t\t\t});\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tlet errorMessage = 'Could not get contracts: ';\r\n\t\t\t\tif (error.response != null && error.response.data != null) {\r\n\t\t\t\t\terrorMessage += error.response.data.exception;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage += error.message;\r\n\t\t\t\t}\r\n\t\t\t\tthis.raiseError(this, errorMessage);\r\n\t\t\t}).finally(() => {\r\n\t\t\t\tthis.setState({ showBackdrop: false });\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({ contracts: [], count: -1 });\r\n\t\t}\r\n\t}\r\n\r\n\tgetAcls() {\r\n\t\tif (this.state.lineManagerAclId.length === 0 || this.state.riskManagerAclId.length === 0 || this.state.completedAclId === 0) {\r\n\t\t\taxios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: baseUrl + '/cms/permissions?filter=name eq \"line_manager_approval\" or name eq \"risk_manager_approval\" or name eq \"completed\"',\r\n\t\t\t\theaders: this.props.authContext.headers\r\n\t\t\t}).then(res => {\r\n\t\t\t\tconst acls = res.data._embedded.collection;\r\n\t\t\t\tacls.forEach((acl) => {\r\n\t\t\t\t\tswitch(acl.name) {\r\n\t\t\t\t\t\tcase \"line_manager_approval\":\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tlineManagerAclId: acl.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"risk_manager_approval\":\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\triskManagerAclId: acl.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"completed\":\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tcompletedAclId: acl.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this.state.lineManagerAclId.length === 0 || this.state.riskManagerAclId.length === 0 || this.state.completedAclId === 0) {\r\n\t\t\t\t\tlet errorMessage = 'Not all required ACLs exist in the repository';\r\n\t\t\t\t\tthis.raiseError(this, errorMessage);\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tlet errorMessage = 'Could not get ACLs: ';\r\n\t\t\t\tif (error.response != null && error.response.data != null) {\r\n\t\t\t\t\terrorMessage += error.response.data.exception;\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrorMessage += error.message;\r\n\t\t\t\t}\r\n\t\t\t\tthis.raiseError(this, errorMessage);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\topenDocumentDialogView(fileId, fileName) {\r\n\t\tthis.setState({\r\n\t\t\topenDocumentDialogView: true,\r\n\t\t\tfileId: fileId,\r\n\t\t\tfileName: fileName\r\n\t\t});\r\n\t}\r\n\r\n\tstartContractForApproval(contractId) {\r\n\t\tthis.setState({ showBackdrop: true });\r\n\r\n\t\tlet data = {\r\n\t\t\t\"processDefinitionKey\": \"contract_approval\",\r\n\t\t\t\"name\": \"Approve contract\",\r\n\t\t\t\"outcome\": \"none\",\r\n\t\t\t\"variables\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"base_url\",\r\n\t\t\t\t\t\"value\": baseUrl\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"contract_id\",\r\n\t\t\t\t\t\"value\": contractId\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"line_manager_approval_acl_id\",\r\n\t\t\t\t\t\"value\": this.state.lineManagerAclId\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"risk_manager_approval_acl_id\",\r\n\t\t\t\t\t\"value\": this.state.riskManagerAclId\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"completed_acl_id\",\r\n\t\t\t\t\t\"value\": this.state.completedAclId\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"returnVariables\": true\r\n\t\t}\r\n\t\taxios({\r\n\t\t\tmethod: 'post',\r\n\t\t\turl: baseUrl + '/workflow/v1/process-instances',\r\n\t\t\theaders: this.props.authContext.headers,\r\n\t\t\tdata: data\r\n\t\t}).then(() => {\r\n\t\t\tthis.setState({ snackBarMessage: 'Approval requested successfully.' });\r\n\t\t\tthis.setState({ showSnackBar: true });\r\n\t\t\tthis.getContracts();\r\n\t\t}).catch(error => {\r\n\t\t\tconst statusCode = error.response.status;\r\n\t\t\tlet errorMessage = 'Error requesting approval: ';\r\n\t\t\tif (statusCode === 400) {\r\n\t\t\t\terrorMessage += error.response.data.exception;\r\n\t\t\t} else {\r\n\t\t\t\terrorMessage += error.message;\r\n\t\t\t}\r\n\t\t\tthis.raiseError(this, errorMessage);\r\n\t\t}).finally(() => {\r\n\t\t\tthis.setState({ showBackdrop: false });\r\n\t\t})\r\n\t}\r\n\r\n\tshowDetails(contract) {\r\n\t\tthis.setState({\r\n\t\t\tselectedContract: contract,\r\n\t\t\topenContractDetails: true\r\n\t\t});\r\n\t}\r\n\r\n\tgetDateValue(dt) {\r\n\t\treturn dt ? new Date(Date.parse(dt)).toLocaleString() : '';\r\n\t}\r\n\r\n\topenContractDialog() {\r\n\t\tthis.setState({\r\n\t\t\topenAddContract: true\r\n\t\t});\r\n\t}\r\n\r\n\traiseError(component, errorMessage) {\r\n\t\tcomponent.setState({\r\n\t\t\tsnackBarSeverity: 'error',\r\n\t\t\tsnackBarMessage: errorMessage,\r\n\t\t\tshowSnackBar: true\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" disabled={!this.props.authContext.userName} startIcon={<AddIcon />} onClick={() => this.openContractDialog()} style={{ margin: \"0.25rem\" }}>Add</Button>\r\n\t\t\t\t<div className='content-header'>All created contracts</div>\r\n\t\t\t\t<TableContainer component={Paper}>\r\n\t\t\t\t\t<Table size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell>Contract name</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\">Creation date</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\">Value</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\">Risk classification</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\">View document</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\">Action</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell align=\"left\" />\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{this.state.contracts.map((row) => (\r\n\t\t\t\t\t\t\t\t<TableRow key={row.id}>\r\n\t\t\t\t\t\t\t\t\t<TableCell component=\"th\" scope=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t{row.name}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">{this.getDateValue(row.create_time)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">{row.properties.value}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\"><RiskClassification row={row} /></TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.openDocumentDialogView(row.id, row.name) }}>Original</Button>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.startContractForApproval(row.id) }}>Request approval</Button>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t<IconButton size=\"small\" variant=\"outlined\" color=\"primary\" title=\"Show details\" onClick={() => { this.showDetails(row) }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<ArrowForwardIosIcon />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t\t<Pagination pageNumber={this.state.pageNumber} count={this.state.count} handlePageNumber={this.handlePageNumber} />\r\n\t\t\t\t<ContractDetails open={this.state.openContractDetails} selectedContract={this.state.selectedContract} parent={this} parentRaiseError={this.raiseError} onClose={this.handleCloseContractDetails} />\r\n\t\t\t\t<AddContract authContext={this.props.authContext} open={this.state.openAddContract} onAddContract={this.handleContractAdded} onClose={this.handleCloseAddContract} />\r\n\t\t\t\t<DocumentDialogView open={this.state.openDocumentDialogView} fileId={this.state.fileId} onClose={this.handleCloseDocumentDialogView} />\r\n\t\t\t\t<Backdrop style={{ zIndex: 9999 }} open={this.state.showBackdrop}>\r\n\t\t\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t\t\t</Backdrop>\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\tvertical: 'bottom',\r\n\t\t\t\t\t\thorizontal: 'center',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\topen={this.state.showSnackBar}\r\n\t\t\t\t\tautoHideDuration={5000}\r\n\t\t\t\t\tonClose={this.handleSnackBarClose}\r\n\t\t\t\t\taction={\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={this.handleSnackBarClose}>\r\n\t\t\t\t\t\t\t\t<CloseIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Alert onClose={this.handleSnackBarClose} severity={this.state.snackBarSeverity}>\r\n\t\t\t\t\t\t{this.state.snackBarMessage}\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t</Snackbar>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CreatedContractList;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper, Backdrop, CircularProgress, Snackbar\r\n} from '@material-ui/core';\r\n\r\nimport ContractDetails from './ContractDetails';\r\nimport Pagination from './Pagination';\r\nimport DocumentDialogView from './DocumentDialogView';\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RiskClassification from './RiskClassification';\r\n\r\nconst baseUrl = process.env.REACT_APP_BASE_URL;\r\n\r\nconst Alert= (props) => {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\n/**\r\n * This view displays all the contracts.\r\n */\r\nexport default class ContractList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      contracts: [],\r\n      contractDetailsOpen: false,\r\n      selectedContract: { properties: {} },\r\n      pageNumber: 0,\r\n      count: -1,\r\n      openDocumentDialogView: false,\r\n      fileId: '',\r\n      fileName: '',\r\n      showBackdrop: false,\r\n      showSnackBar: false,\r\n      snackBarMessage: '',\r\n      snackBarSeverity: 'success'\r\n    };\r\n\r\n    this.handleCloseContractDetails = this.handleCloseContractDetails.bind(this);\r\n    this.handleCloseDocumentDialogView = this.handleCloseDocumentDialogView.bind(this);\r\n    this.handleSnackBarClose = this.handleSnackBarClose.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getContracts();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.pageNumber !== this.state.pageNumber) {\r\n      this.getContracts();\r\n    }\r\n  }\r\n\r\n  handleCloseDocumentDialogView() {\r\n    this.setState({ openDocumentDialogView: false })\r\n  }\r\n\r\n  openDocumentDialogView(fileId, fileName) {\r\n    this.setState({\r\n      openDocumentDialogView: true,\r\n      fileId: fileId,\r\n      fileName: fileName\r\n    });\r\n  }\r\n\r\n  getContracts() {\r\n    this.setState({ showBackdrop: true });\r\n    axios({\r\n      method: 'get',\r\n      url: baseUrl + '/cms/instances/file/ca_contract/?include-total=true&sortby=create_time desc&page=' + (this.state.pageNumber + 1),\r\n      headers: this.props.authContext.headers\r\n    }).then(res => {\r\n      this.setState({\r\n        contracts: res.data && res.data._embedded ? res.data._embedded.collection : [],\r\n        count: res.data.total\r\n      });\r\n    }).catch(error => {\r\n      let errorMessage = 'Could not get contracts: ';\r\n      if (error.response != null && error.response.data != null) {\r\n        errorMessage += error.response.data.exception;\r\n      } else {\r\n        errorMessage += error.message;\r\n      }\r\n      this.raiseError(this, errorMessage);\r\n    }).finally(() => {\r\n      this.setState({ showBackdrop: false });\r\n    })\r\n  }\r\n\r\n  showDetails(contract) {\r\n    this.setState({\r\n      selectedContract: contract,\r\n      contractDetailsOpen: true\r\n    });\r\n  }\r\n\r\n  getDateValue(dt) {\r\n    return dt ? new Date(Date.parse(dt)).toLocaleString() : '';\r\n  }\r\n\r\n  handlePageNumber = (pageNumber) => {\r\n    this.setState({ pageNumber: pageNumber });\r\n  }\r\n\r\n  handleCloseContractDetails() {\r\n    this.setState({ contractDetailsOpen: false });\r\n  }\r\n\r\n  handleSnackBarClose() {\r\n    this.setState({ showSnackBar: false });\r\n  }\r\n\r\n  raiseError(component, errorMessage) {\r\n    component.setState({\r\n      snackBarSeverity: 'error',\r\n      snackBarMessage: errorMessage,\r\n      showSnackBar: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className='content-header'>All contracts</div>\r\n\r\n        <TableContainer component={Paper}>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Contract name</TableCell>\r\n                <TableCell align=\"left\">Creation date</TableCell>\r\n                <TableCell align=\"left\">Status</TableCell>\r\n                <TableCell align=\"left\">Value</TableCell>\r\n                <TableCell align=\"left\">Risk classification</TableCell>\r\n                <TableCell align=\"left\">View document</TableCell>\r\n                <TableCell align=\"left\" />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {this.state.contracts.map((row) => (\r\n                <TableRow key={row.id}>\r\n                  <TableCell component=\"th\" scope=\"row\">{row.name}</TableCell>\r\n                  <TableCell align=\"left\">{this.getDateValue(row.create_time)}</TableCell>\r\n                  <TableCell align=\"left\">{row.properties ? row.properties.status : ''}</TableCell>\r\n                  <TableCell align=\"left\">{row.properties ? row.properties.value : ''}</TableCell>\r\n                  <TableCell align=\"left\"><RiskClassification row={row} /></TableCell>\r\n                  <TableCell align=\"left\">\r\n                    <Button size=\"small\" variant=\"outlined\" color=\"primary\" onClick={() => { this.openDocumentDialogView(row.id, row.name) }}>Original</Button>\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    <IconButton size=\"small\" variant=\"outlined\" color=\"primary\" title=\"Show details\" onClick={() => { this.showDetails(row) }}>\r\n                      <ArrowForwardIosIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Pagination pageNumber={this.state.pageNumber} count={this.state.count} handlePageNumber={this.handlePageNumber} />\r\n        <ContractDetails open={this.state.contractDetailsOpen} selectedContract={this.state.selectedContract} parent={this} parentRaiseError={this.raiseError} onClose={this.handleCloseContractDetails} />\r\n        <DocumentDialogView open={this.state.openDocumentDialogView} fileId={this.state.fileId} onClose={this.handleCloseDocumentDialogView} />\r\n        <Backdrop style={{ zIndex: 9999 }} open={this.state.showBackdrop}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'center',\r\n          }}\r\n          open={this.state.showSnackBar}\r\n          autoHideDuration={5000}\r\n          onClose={this.handleSnackBarClose}\r\n          action={\r\n            <React.Fragment>\r\n              <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={this.handleSnackBarClose}>\r\n                <CloseIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </React.Fragment>\r\n          }\r\n        >\r\n          <Alert onClose={this.handleSnackBarClose} severity={this.state.snackBarSeverity}>\r\n            {this.state.snackBarMessage}\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport {\r\n  Tab,\r\n  Tabs\r\n} from \"@material-ui/core\";\r\n\r\nimport './style/App.css';\r\nimport { AuthProvider, authService, login, logout, logoutWithIdTokenHint, useAuth } from './authorization/ocpRestClient';\r\nimport Header from './Header';\r\nimport TabPanel from './TabPanel';\r\nimport TasksList from './TasksList';\r\nimport CreatedContractList from './CreatedContractList';\r\nimport ContractList from './ContractList';\r\nimport { ApplicationProvider } from './context/ApplicationContext';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nfunction App() {\r\n  const [value, setValue] = useState(0);\r\n\r\n  const { authService } = useAuth();\r\n\r\n  if (authService.isPending()) {\r\n    return (\r\n      <div className=\"page-content\">\r\n        <p>Loading...</p>\r\n        <button style={{ margin: \"0.50rem\" }} onClick={() => { logout(true); login(); }}>Reset</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authService.isAuthenticated()) {\r\n    login();\r\n    return (\r\n      <div className=\"page-content\">\r\n        <p>Logging in ...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const groups = jwtDecode(authService.getAuthTokens().id_token).grp.map(function (group) {\r\n    const fullGroupName = JSON.stringify(group);\r\n    return (fullGroupName.substring(1, fullGroupName.indexOf('@')));\r\n  });\r\n\r\n  const authContext = {\r\n    userName: authService.getUser().preferred_username,\r\n    idToken: authService.getAuthTokens().id_token,\r\n    groups: groups,\r\n    headers: {\r\n      Authorization: `Bearer ${authService.getAuthTokens().access_token}`\r\n    }\r\n  }\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  }\r\n\r\n  let tabIndex = 0;\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header\r\n        authContext={authContext}\r\n        logout={logoutWithIdTokenHint}\r\n      />\r\n      {\r\n        authContext.groups.includes(\"contract_approval_users\")\r\n        ?\r\n        <div className=\"page-content\">\r\n          <Tabs orientation=\"horizontal\"\r\n            value={value}\r\n            onChange={handleChange}>\r\n            <Tab className=\"tab-caption\" label=\"Created Contracts\" />\r\n            {\r\n              authContext.groups.includes(\"line_managers\") &&\r\n              <Tab className=\"tab-caption\" label=\"Line Manager Tasks\" />\r\n            }\r\n            {\r\n              authContext.groups.includes(\"risk_managers\") &&\r\n              <Tab className=\"tab-caption\" label=\"Risk Manager Tasks\" />\r\n            }\r\n            <Tab className=\"tab-caption\" label=\"All Contracts\" />\r\n          </Tabs>\r\n          <ApplicationProvider>\r\n            <TabPanel value={value} index={tabIndex ++}>\r\n              <CreatedContractList authContext={authContext} />\r\n            </TabPanel>\r\n            {\r\n              authContext.groups.includes(\"line_managers\") &&\r\n              <TabPanel value={value} index={tabIndex ++}>\r\n                <TasksList authContext={authContext} taskname=\"Line Manager Approval\" />\r\n              </TabPanel>\r\n            }\r\n            {\r\n              authContext.groups.includes(\"risk_managers\") &&\r\n              <TabPanel value={value} index={tabIndex ++}>\r\n                <TasksList authContext={authContext} taskname=\"Risk Manager Approval\" />\r\n              </TabPanel>\r\n            }\r\n            <TabPanel value={value} index={tabIndex ++}>\r\n              <ContractList authContext={authContext} />\r\n            </TabPanel>\r\n          </ApplicationProvider>\r\n        </div>\r\n        :\r\n        <div className=\"page-content\">\r\n          <p>You are not authorized to use this application</p>\r\n          <button style={{ margin: \"0.50rem\" }} onClick={() => { logoutWithIdTokenHint(true, authContext.idToken); }}>Logout</button>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst WrappedSecuredApp = () => {\r\n  return (\r\n    <AuthProvider authService={authService} >\r\n      <App />\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default WrappedSecuredApp;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style/index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}